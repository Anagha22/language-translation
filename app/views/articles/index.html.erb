<%# if current_user.login_approval_at %>
<%# if current_user.has_any_role? :admin, :volunteer %>

<h2>Listing photos</h2>
 
<%= render partial: "search_form" %>

<table class="table table-striped" id="customers">
  <tr>
    <th>Language</th>
    <th>Category</th>
    <th>English Text</th>
    <th>Phonetic Text</th>
    <th>State</th>
    <th>Picture</th>
    <th colspan="2"></th>
  </tr>
 
  <div id="articles">
    <%= render partial: 'article', collection: @articles %>
  </div>
</table>

<%= paginate @articles %>

<%# end %>



<% #FIXME - refacor this index view after fixing role system (added by Isuri) %>

<% if current_user.has_role? :contributor %>
<% if current_user.lang == nil %> 
  <!-- do nothing as 1 contributor can contribute to 1 language only -->
<% else %>

<h1>Listing photos for <%= current_user.lang %> language</h1>
<p>
<%= link_to '+New photo', new_article_path %>
</p>
 
<ol>
  <% @articles.each do |article| %>
    <% if article.language.present? %>
      <% if article.language.name == current_user.lang %>
        <li>
          <p>
            <strong>Picture:</strong>
            <%= image_tag(article.picture_url, :width => 400) if article.picture.present? %>
          </p>
          <p>
            <strong>Phonetic Text:</strong>
            <%= article.phonetic %>
          </p>
          <p>
            <strong>English Text:</strong>
            <%= article.english %>
          </p> 
          <p>
            <strong>Category:</strong>
            <%= article.category %>
          </p>
        </li>
        <%= link_to 'Show', article_path(article) %>
        <%= link_to 'Edit', edit_article_path(article) %></p>
        <hr/>
      <% end %>
    <% end %>
  <% end %>
</ol>

<% end %>
<% end %>

<%# end %>
<%# end %>
